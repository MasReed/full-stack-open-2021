(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{22:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t(16),r=t.n(a),i=(t(22),t(17)),u=t(3),o=t(5),s=t.n(o),l="/api/persons",d={createContact:function(e){return s.a.post(l,e).then((function(e){return e.data}))},readAllContacts:function(){return s.a.get(l).then((function(e){return e.data}))},updateContact:function(e){return s.a.put(l+"/".concat(e.id),e).then((function(e){return e.data}))},deleteContact:function(e){return s.a.delete(l+"/".concat(e)).then((function(e){return e.data}))}},j=t(0),b=function(e){var n=e.message;if(!n)return null;return Object(j.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:n})},f=function(e){var n=e.onChange,t=e.value;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{children:Object(j.jsx)("input",{placeholder:"Search Contacts...",onChange:n,value:t})})})},h=function(e){var n=e.onSubmit,t=e.newName,c=e.handleNameChange,a=e.newNumber,r=e.handleNumberChange;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Add New Contact"}),Object(j.jsxs)("form",{onSubmit:n,children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Name: "}),Object(j.jsx)("input",{value:t,onChange:c})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Number: "}),Object(j.jsx)("input",{value:a,onChange:r})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"Add"})})]})]})},m=function(e){var n=e.id,t=e.name,c=e.number,a=e.onClick;return Object(j.jsxs)("div",{id:n,style:{padding:"5px"},children:[Object(j.jsxs)("p",{style:{display:"inline"},children:[t,": #",c]}),Object(j.jsx)("button",{onClick:a,style:{display:"inline",marginLeft:"10px"},children:"Delete"})]},n)},O=function(e){var n=e.getContacts,t=e.onClick,c=n();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Contacts"}),c.map((function(e){return e?Object(j.jsx)(m,{id:e.id,name:e.name,number:e.number,onClick:t},e.id):null}))]})},x=function(e){var n=e.message;if(!n)return null;return Object(j.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:n})},p=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),o=Object(u.a)(r,2),s=o[0],l=o[1],m=Object(c.useState)(""),p=Object(u.a)(m,2),g=p[0],C=p[1],v=Object(c.useState)(""),w=Object(u.a)(v,2),y=w[0],S=w[1],N=Object(c.useState)(!0),k=Object(u.a)(N,2),F=k[0],L=k[1],A=Object(c.useState)(null),B=Object(u.a)(A,2),D=B[0],R=B[1],T=Object(c.useState)(null),z=Object(u.a)(T,2),E=z[0],I=z[1];Object(c.useEffect)((function(){d.readAllContacts().then((function(e){return a(e)}))}),[]);var J=function(e){var n=e.name,c=e.number,r=t.filter((function(e){return e.name===n}))[0],u=r.id,o={name:n,number:c,id:u};d.updateContact(o).then((function(e){a((function(n){var t=n.indexOf(r),c=Object(i.a)(n);return c[t]=e,c})),R("'".concat(n,"' successfully updated!")),setTimeout((function(){R(null)}),5e3)})).catch((function(e){I("'".concat(o.name,"' cannot be found.")),setTimeout((function(){I(null)}),5e3)})),l(""),C("")};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{children:"Phonebook"}),Object(j.jsx)(x,{message:D}),Object(j.jsx)(b,{message:E}),Object(j.jsx)(f,{onChange:function(e){L(!1),S(e.target.value)},value:y}),Object(j.jsx)(h,{onSubmit:function(e){e.preventDefault();var n={name:s,number:g};t.some((function(e){return e.name.toLowerCase()===s.toLowerCase()}))?window.confirm("\n'".concat(s,"' is already a contact.\n                \nReplace the previous number with: ").concat(g,"?"))&&J(n):d.createContact(n).then((function(e){a(t.concat(e)),R("'".concat(n.name,"' successfully added!")),setTimeout((function(){R(null)}),5e3)}));l(""),C("")},newName:s,handleNameChange:function(e){l(e.target.value)},newNumber:g,handleNumberChange:function(e){C(e.target.value)}}),Object(j.jsx)(O,{getContacts:function(){return F?t:t.filter((function(e){return!0===e.name.toLowerCase().includes(y.toLowerCase())}))},onClick:function(e){var n=parseInt(e.target.parentNode.id),c=t.find((function(e){return e.id===n}));window.confirm("Delete contact '".concat(c.name,"' ?"))&&d.deleteContact(n).then((function(e){a(t.filter((function(e){return e.id!==n})))})).catch((function(e){console.log(e)}))}})]})};r.a.render(Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(p,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.e8ff90d9.chunk.js.map