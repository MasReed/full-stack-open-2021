(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(16),r=n.n(a),o=(n(22),n(17)),i=n(3),u=n(5),s=n.n(u),l="http://localhost:3001/api/persons",d={createContact:function(e){return s.a.post(l,e).then((function(e){return e.data}))},readAllContacts:function(){return s.a.get(l).then((function(e){return e.data}))},updateContact:function(e){return s.a.put(l+"/".concat(e.id),e).then((function(e){return e.data}))},deleteContact:function(e){return s.a.delete(l+"/".concat(e)).then((function(e){return e.data}))}},j=n(0),b=function(e){var t=e.message;if(!t)return null;return Object(j.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:t})},f=function(e){var t=e.onChange,n=e.value;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{children:Object(j.jsx)("input",{placeholder:"Search Contacts...",onChange:t,value:n})})})},h=function(e){var t=e.onSubmit,n=e.newName,c=e.handleNameChange,a=e.newNumber,r=e.handleNumberChange;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Add New Contact"}),Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Name: "}),Object(j.jsx)("input",{value:n,onChange:c})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Number: "}),Object(j.jsx)("input",{value:a,onChange:r})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"Add"})})]})]})},m=function(e){var t=e.id,n=e.name,c=e.number,a=e.onClick;return Object(j.jsxs)("div",{id:t,style:{padding:"5px"},children:[Object(j.jsxs)("p",{style:{display:"inline"},children:[n,": #",c]}),Object(j.jsx)("button",{onClick:a,style:{display:"inline",marginLeft:"10px"},children:"Delete"})]},t)},O=function(e){var t=e.getContacts,n=e.onClick,c=t();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Contacts"}),c.map((function(e){return e?Object(j.jsx)(m,{id:e.id,name:e.name,number:e.number,onClick:n},e.id):null}))]})},p=function(e){var t=e.message;if(!t)return null;return Object(j.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:t})},x=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),u=Object(i.a)(r,2),s=u[0],l=u[1],m=Object(c.useState)(""),x=Object(i.a)(m,2),g=x[0],C=x[1],v=Object(c.useState)(""),w=Object(i.a)(v,2),y=w[0],S=w[1],N=Object(c.useState)(!0),k=Object(i.a)(N,2),F=k[0],L=k[1],A=Object(c.useState)(null),B=Object(i.a)(A,2),D=B[0],R=B[1],T=Object(c.useState)(null),z=Object(i.a)(T,2),E=z[0],I=z[1];Object(c.useEffect)((function(){d.readAllContacts().then((function(e){return a(e)}))}),[]);var J=function(e){var t=e.name,c=e.number,r=n.filter((function(e){return e.name===t}))[0],i=r.id,u={name:t,number:c,id:i};d.updateContact(u).then((function(e){a((function(t){var n=t.indexOf(r),c=Object(o.a)(t);return c[n]=e,c})),R("'".concat(t,"' successfully updated!")),setTimeout((function(){R(null)}),5e3)})).catch((function(e){I("'".concat(u.name,"' cannot be found.")),setTimeout((function(){I(null)}),5e3)})),l(""),C("")};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{children:"Phonebook"}),Object(j.jsx)(p,{message:D}),Object(j.jsx)(b,{message:E}),Object(j.jsx)(f,{onChange:function(e){L(!1),S(e.target.value)},value:y}),Object(j.jsx)(h,{onSubmit:function(e){e.preventDefault();var t={name:s,number:g};n.some((function(e){return e.name.toLowerCase()===s.toLowerCase()}))?window.confirm("\n'".concat(s,"' is already a contact.\n                \nReplace the previous number with: ").concat(g,"?"))&&J(t):d.createContact(t).then((function(e){a(n.concat(e)),R("'".concat(t.name,"' successfully added!")),setTimeout((function(){R(null)}),5e3)}));l(""),C("")},newName:s,handleNameChange:function(e){l(e.target.value)},newNumber:g,handleNumberChange:function(e){C(e.target.value)}}),Object(j.jsx)(O,{getContacts:function(){return F?n:n.filter((function(e){return!0===e.name.toLowerCase().includes(y.toLowerCase())}))},onClick:function(e){var t=parseInt(e.target.parentNode.id),c=n.find((function(e){return e.id===t}));window.confirm("Delete contact '".concat(c.name,"' ?"))&&d.deleteContact(t).then((function(e){a(n.filter((function(e){return e.id!==t})))})).catch((function(e){console.log(e)}))}})]})};r.a.render(Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(x,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.cf9f00da.chunk.js.map